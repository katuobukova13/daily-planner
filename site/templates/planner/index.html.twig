{% extends 'base.html.twig' %}

{% block body %}
    <div class="container m-5 p-2 rounded mx-auto bg-light shadow">
        <!-- App title section -->
        <div class="row m-1 p-4">
            <div class="col">
                <div class="p-1 h1 text-primary text-center mx-auto display-inline-block">
                    Daily-planner
                </div>
                <p class="p-1 text-secondary text-center mx-auto">Create task with dates and files</p>
            </div>
        </div>
        <div class="row m-1 p-3">
            {% if app.user %}
            <!-- Create todo section -->
            <div class="d-flex align-items-center justify-content-center">
                <div {{ stimulus_controller('modal-form', {
                    formUrl: path('home')
                }) }}>
                <button class="btn btn-primary"
                        data-action="modal-form#openModal">
                    Add task</button>
                    {{ include('_modal.html.twig', {
                        modalTitle: 'Add a new Product',
                    }) }}
            </div>
            </div>
        </div>
        <div class="p-2 mx-4 border-black-25 border-bottom"></div>
        <!-- Todo list section -->
        <div class="row mx-1 px-5 py-3 w-80">
            {% if app.user %}
                <div class="col mx-auto mx-4">
                    {% for task in tasks %}
                        <div class="row px-3 align-items-center todo-item rounded">
                            <div class="col px-1 m-1 d-flex align-items-center">
                                <input type="checkbox" id="defaultCheck1" class="form-control edit-todo-input rounded px-3 form-check-input"/>
                                <label class="form-check-label border-0 edit-todo-input bg-transparent px-3" for="defaultCheck1">
                                    {{ task.description }}
                                </label>
                            </div>
                            <div class="col-auto m-1 p-0 px-3">
                                <div class="row">
                                    <div class="col-auto d-flex align-items-center rounded bg-white border border-success">
                                        <h6 class="text my-2 pr-2">{{ task.date.format('d.m.Y') }}</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
            {% else %}
                <div class="text-secondary text-center mx-auto display-inline-block m-1 p-3">Now it's empty</div>
            {% endif %}
                </div>
            {% else %}
                <div class="d-flex justify-content-center">
                    <a class="btn btn-primary" href="{{ path('app_login') }}">Login</a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}